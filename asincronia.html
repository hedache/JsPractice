<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asincronía</title>
</head>
<body>
    <h1>Asincronía</h1>

    <script>
        // setTimeout(() => {
        //     console.log(`lol`);
        // }, 1000)

        // setInterval(() => {
        //     console.log(`relol`);
        // }, 2000)

        // setInterval(() => {
        //     console.log(new Date().toLocaleTimeString());
        // }, 1000)


        // cancelar setTimeout o setInterval

        // let tempSet = setTimeout(() => {
        //     console.log(`hi`);
        // }, 1000)

        // clearTimeout(tempSet);

        // let tempIn = setInterval(() => {
        //     console.log(`hi 1`);
        // }, 1000)

        // clearInterval(tempIn);

        // Código Síncrono bloqueante
        // (() => {
        //     console.log('Código Síncrono');
        //     console.log('Inicio');
        //     function dos() {
        //         console.log('Dos');
        //     }
        //     function uno() {
        //         console.log('Uno');
        //         dos();
        //         console.log('Tres');
        //     }
        //     uno()
        //     console.log('FIN');
        // })()

        // Código Asíncrono No bloqueante

        // (() => {
        //     console.log('Código Asíncrono');
        //     console.log('Inicio');
        //     function dos() {
        //         setTimeout(() => {
        //             console.log('Dos');
        //         }, 1000)
        //     }
        //     function uno() {
        //         setTimeout(() => {
        //             console.log('Uno');
        //         }, 0)
        //         dos();
        //         console.log('Tres');
        //     }
        //     uno();
        //     console.log('Fin');
        // })()


        // callbacks: llamada de vuelta, es una función q se va a ejecutar después de q otra lo haga

        // function cuadradoCallback(value, callback) {
        //     setTimeout(() => {
        //         callback(value, value * value, 'hola')
        //     }, 0 | Math.random() * 1000)
        // }

        // cuadradoCallback(0, (value, result, h) => {
        //     console.log('Inicia Callback');
        //     console.log(`Callback ${value}, ${result}, ${h}`);
        //     cuadradoCallback(1, (value, result, h) => {
        //         console.log(`Callback ${value}, ${result}, ${h}`);
        //         cuadradoCallback(2, (value, result, h) => {
        //             console.log(`Callback ${value}, ${result}, ${h}`);
        //             cuadradoCallback(3, (value, result, h) => {
        //                 console.log(`Callback ${value}, ${result}, ${h}`);
        //                 cuadradoCallback(4, (value, result, h) => {
        //                     console.log(`Callback ${value}, ${result}, ${h}`);
        //                     cuadradoCallback(5, (value, result, h) => {
        //                         console.log(`Callback ${value}, ${result}, ${h}`);
        //                     })
        //                 })
        //             })
        //         })
        //     })
        // }) 

        // console.log('q cosas');

        // function cuadradoCallback(value) {

        //     if(typeof value !== 'number') return Promise.reject(`Error, el valor: ${value} ingresado no es un número`);

        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             resolve({
        //                 value,
        //                 result: value * value
        //             });
        //         }, 0 | Math.random() * 1000)
        //     })

        // }

        // cuadradoCallback(0)
        // .then((obj) => {
        //     console.log('Inicia promesa');
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     return cuadradoCallback(1);
        // })
        // .then(obj => {
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     return cuadradoCallback(2);
        // })
        // .then(obj => {
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     return cuadradoCallback(3);
        // })
        // .then(obj => {
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     return cuadradoCallback(4);
        // })
        // .then(obj => {
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     return cuadradoCallback('p');
        // })
        // .then(obj => {
        //     console.log(`Promise: ${obj.value}, ${obj.result}`);
        //     console.log('Fin de la promesa');
        // })
        // .cath(err => console.error(err));

        function cuadradoPromise(value) {

        if(typeof value !== 'number') return Promise.reject(`Error, el valor: ${value} ingresado no es un número`);

        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve({
                    value,
                    result: value * value
                });
            }, 0 | Math.random() * 1000)
        })

        }

        async function funcionAsincronaDeclarada() {
            try {
                console.log('Inicio Async Function');

                let obj = await cuadradoPromise(0);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(1);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(2);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(3);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(4);
                console.log(`Async Function: ${obj.value} ${obj.result}`);
                
                obj = await cuadradoPromise(5);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                console.log('Fin Async Function');
            } catch(err) {
                console.error(err);
            }
        }


        const funcionAsincronaExpresada = async () => {
            try {
                console.log('Inicio Async Function');

                let obj = await cuadradoPromise(6);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(7);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(8);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(9);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                obj = await cuadradoPromise(10);
                console.log(`Async Function: ${obj.value} ${obj.result}`);

                console.log('Fin Async Function');
            } catch(err) {
                console.error(err);
            }
        }




        funcionAsincronaDeclarada();
        funcionAsincronaExpresada();






    </script>
</body>
</html>